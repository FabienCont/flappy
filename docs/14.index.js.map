{"version":3,"sources":["webpack:///./sources/game/models/systems/common/images.js"],"names":["images","entities","Object","entries","forEach","entity","cameraComponent","get","imagesComponent","originComponent","positionComponent","parts","image","destination","frames","framerate","opacity","source","frame","x","y","width","height","assets","common","camera","add","scope","file","reference","scale","z"],"mappings":"4eAAA,SAASA,EAAOC,GAAU,WAEtBC,OAAOC,QAAQF,GAAUG,SAAQ,YAAoB,aAAZC,GAAY,WAE3CC,EAAkBD,EAAOE,IAAI,UAC7BC,EAAkBH,EAAOE,IAAI,UAC7BE,EAAkBJ,EAAOE,IAAI,UAC7BG,EAAoBL,EAAOE,IAAI,YAErCC,EAAgBG,MAAMP,SAAQ,SAACQ,GAAU,IAE9BC,EAA2CD,EAA3CC,YAAwBC,GAAmBF,EAA9BG,UAA8BH,EAAnBE,QAAQE,EAAWJ,EAAXI,QAElCC,EAAUL,EAAVK,OAJgC,IAMTH,EAAOF,EAAMM,OANJ,GAMhCC,EANgC,KAM7BC,EAN6B,KAM1BC,EAN0B,KAMnBC,EANmB,UAQf,IAAXL,IAEPA,EAAS,EAAKM,OAAOvB,OAAOwB,OAAO,qBAEnCL,GAAQ,EACRC,GAAQ,EACRC,EAAQ,EACRC,EAAS,GAGbhB,EAAgBmB,OAAOC,IAAI,CAEvB,OAAU,EAAKH,OAAOvB,OAAOiB,EAAOU,OAAOV,EAAOW,QAClD,MAAS,CAEL,EAAKP,EAAQF,EACb,EAAKG,EAASF,EACd,MAASC,EACT,OAAUC,GAEd,YAAe,CAEX,GAAMZ,EAAkBS,EAAIN,EAAY,IAAMJ,EAAgBoB,UAAUC,QAAUrB,EAAgBoB,UAAUV,IAC5G,GAAMT,EAAkBU,EAAIP,EAAY,IAAMJ,EAAgBoB,UAAUC,QAAUrB,EAAgBoB,UAAUT,IAC5G,EAAKV,EAAkBqB,EAAIlB,EAAY,GAAKJ,EAAgBoB,UAAUE,IACtE,MAAUlB,EAAY,GAAKJ,EAAgBoB,UAAUC,QACrD,OAAWjB,EAAY,GAAKJ,EAAgBoB,UAAUC,SAE1D,QAAWxB,EAAgBU,QAAUA,U","file":"14.index.js","sourcesContent":["function images(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const cameraComponent = entity.get('camera');\n        const imagesComponent = entity.get('images');\n        const originComponent = entity.get('origin');\n        const positionComponent = entity.get('position');\n\n        imagesComponent.parts.forEach((image) => {\n\n            const {destination, framerate, frames, opacity} = image;\n\n            let {source} = image;\n\n            let [x, y, width, height] = frames[image.frame];\n\n            if (typeof source === 'undefined') {\n\n                source = this.assets.images.common['placeholder-8x1']();\n\n                x = x % 8;\n                y = y % 1;\n                width = 1;\n                height = 1;\n            }\n\n            cameraComponent.camera.add({\n\n                'source': this.assets.images[source.scope][source.file](),\n                'frame': {\n\n                    'x': width * x,\n                    'y': height * y,\n                    'width': width,\n                    'height': height\n                },\n                'destination': {\n\n                    'x': (positionComponent.x + destination[0]) * originComponent.reference.scale() + originComponent.reference.x(),\n                    'y': (positionComponent.y + destination[1]) * originComponent.reference.scale() + originComponent.reference.y(),\n                    'z': positionComponent.z + destination[2] + originComponent.reference.z(),\n                    'width': (destination[3] * originComponent.reference.scale()),\n                    'height': (destination[4] * originComponent.reference.scale())\n                },\n                'opacity': cameraComponent.opacity * opacity\n            });\n        });\n    });\n}\n\nexport {images};\n"],"sourceRoot":""}