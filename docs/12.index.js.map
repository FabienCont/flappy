{"version":3,"sources":["webpack:///./sources/game/models/systems/common/fade.js"],"names":["fade","entities","Object","entries","forEach","entity","cameraComponent","get","fadeComponent","opacity","remaining","duration","elapsed","delta","update","progress","faded","easing","ending"],"mappings":"4eAAA,SAASA,EAAKC,GAAU,WAEpBC,OAAOC,QAAQF,GAAUG,SAAQ,YAAoB,aAAZC,GAAY,WAE3CC,EAAkBD,EAAOE,IAAI,UAC7BC,EAAgBH,EAAOE,IAAI,QAEN,OAAvBC,EAAcR,OAEdQ,EAAcR,KAAOQ,EAAcC,QAAUH,EAAgBG,SAGjE,IAAMC,EAAYF,EAAcG,SAAWH,EAAcI,QACnDC,EAAQ,EAAKA,MAAMC,OAASJ,EAAYA,EAAY,EAAKG,MAAMC,OAE/DC,GAAYP,EAAcI,QAAUC,GAASL,EAAcG,SAC3DK,EAAQR,EAAcR,KAAOQ,EAAcS,OAAOF,GAExDT,EAAgBG,SAAWO,EAAQR,EAAcQ,MACjDR,EAAcQ,MAAQA,EAEtBR,EAAcI,SAAWC,EAErBL,EAAcI,SAAWJ,EAAcG,UACR,mBAAzBH,EAAcU,QAEpBV,EAAcU,OAAOb,EAAQ,EAAKQ,MAAMC,OAASD,M","file":"12.index.js","sourcesContent":["function fade(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const cameraComponent = entity.get('camera');\n        const fadeComponent = entity.get('fade');\n\n        if (fadeComponent.fade === null) {\n\n            fadeComponent.fade = fadeComponent.opacity - cameraComponent.opacity;\n        }\n\n        const remaining = fadeComponent.duration - fadeComponent.elapsed;\n        const delta = this.delta.update > remaining ? remaining : this.delta.update;\n\n        const progress = (fadeComponent.elapsed + delta) / fadeComponent.duration;\n        const faded = fadeComponent.fade * fadeComponent.easing(progress);\n\n        cameraComponent.opacity += faded - fadeComponent.faded;\n        fadeComponent.faded = faded;\n\n        fadeComponent.elapsed += delta;\n\n        if (fadeComponent.elapsed >= fadeComponent.duration\n        && typeof fadeComponent.ending === 'function') {\n\n            fadeComponent.ending(entity, this.delta.update - delta);\n        }\n    });\n}\n\nexport {fade};\n"],"sourceRoot":""}